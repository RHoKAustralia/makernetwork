/*
 * arrive.js
 * v1.1.2
 * https://github.com/uzairfarooq/arrive
 * MIT licensed
 *
 * Copyright (c) 2014 Uzair Farooq
 */

(function(q,r,m){function n(a,c,b){for(var e=0,d;d=a[e];e++)h.matchesSelector(d,c.selector)&&-1==c.firedElems.indexOf(d)&&(c.firedElems.push(d),b.push({callback:c.callback,elem:d})),0<d.childNodes.length&&n(d.childNodes,c,b)}function s(a){for(var c=0,b;b=a[c];c++)b.callback.call(b.elem)}function f(a){a.arrive=k.bindEvent;h.addMethod(a,"unbindArrive",k.unbindEvent);h.addMethod(a,"unbindArrive",k.unbindEventWithSelectorOrCallback);h.addMethod(a,"unbindArrive",k.unbindEventWithSelectorAndCallback);a.leave=
l.bindEvent;h.addMethod(a,"unbindLeave",l.unbindEvent);h.addMethod(a,"unbindLeave",l.unbindEventWithSelectorOrCallback);h.addMethod(a,"unbindLeave",l.unbindEventWithSelectorAndCallback)}var h=function(){var a=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(c,b){return c instanceof HTMLElement&&a.call(c,b)},addMethod:function(c,b,a){var d=c[b];c[b]=function(){if(a.length==
arguments.length)return a.apply(this,arguments);if("function"==typeof d)return d.apply(this,arguments)}}}}(),t=function(){var a=function(){this._eventsBucket=[];this._beforeRemoving=this._beforeAdding=null};a.prototype.addEvent=function(c,b,a){c={target:c,selector:b,callback:a,firedElems:[]};this._beforeAdding&&this._beforeAdding(c);this._eventsBucket.push(c);return c};a.prototype.removeEvent=function(c){for(var b=this._eventsBucket.length-1,a;a=this._eventsBucket[b];b--)c(a)&&(this._beforeRemoving&&
this._beforeRemoving(a),this._eventsBucket.splice(b,1))};a.prototype.beforeAdding=function(c){this._beforeAdding=c};a.prototype.beforeRemoving=function(c){this._beforeRemoving=c};return a}();m=function(a,c){function b(d){"number"!==typeof d.length&&(d=[d]);return d}var e=new t;e.beforeAdding(function(d){var b=d.target,g;if(b===q.document||b===q)b=document.getElementsByTagName("html")[0];g=new MutationObserver(function(b){c.call(this,b,d)});g.observe(b,a);d.observer=g});e.beforeRemoving(function(b){b.observer.disconnect()});
this.bindEvent=function(c,a){for(var g=b(this),p=0;p<g.length;p++)e.addEvent(g[p],c,a)};this.unbindEvent=function(){var c=b(this);e.removeEvent(function(b){for(var a=0;a<c.length;a++)if(b.target===c[a])return!0;return!1})};this.unbindEventWithSelectorOrCallback=function(a){var c=b(this);e.removeEvent("function"===typeof a?function(b){for(var e=0;e<c.length;e++)if(b.target===c[e]&&b.callback===a)return!0;return!1}:function(b){for(var e=0;e<c.length;e++)if(b.target===c[e]&&b.selector===a)return!0;return!1})};
this.unbindEventWithSelectorAndCallback=function(c,a){var g=b(this);e.removeEvent(function(b){for(var e=0;e<g.length;e++)if(b.target===g[e]&&b.selector===c&&b.callback===a)return!0;return!1})};return this};var k=new m({attributes:!0,childList:!0,subtree:!0},function(a,c){a.forEach(function(b){var a=b.addedNodes,d=b.target,f=[];null!==a&&0<a.length?n(a,c,f):"attributes"===b.type&&h.matchesSelector(d,c.selector)&&-1==c.firedElems.indexOf(d)&&(c.firedElems.push(d),f.push({callback:c.callback,elem:d}));
s(f)})}),l=new m({childList:!0,subtree:!0},function(a,c){a.forEach(function(b){b=b.removedNodes;var a=[];null!==b&&0<b.length&&n(b,c,a);s(a)})});r&&f(r.fn);f(HTMLElement.prototype);f(NodeList.prototype);f(HTMLCollection.prototype);f(HTMLDocument.prototype);f(Window.prototype)})(this,jQuery);
