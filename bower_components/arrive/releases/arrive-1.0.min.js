/*
 * arrive.js
 * v1.0
 * https://github.com/uzairfarooq/arrive
 * MIT licensed
 *
 * Copyright (c) 2014 Uzair Farooq
 */

(function(n,f,l){function m(c,b,a){for(var e=0,g;g=c[e];e++){var d=f(g);d.is(b.selector)&&-1==b.firedElems.indexOf(d[0])&&(b.firedElems.push(d[0]),a.push({callback:b.callback,elem:d[0]}));0<g.childNodes.length&&m(g.childNodes,b,a)}}function p(c){for(var b=0,a;a=c[b];b++)a.callback.call(a.elem)}function k(c,b,a){var e=c[b];c[b]=function(){if(a.length==arguments.length)return a.apply(this,arguments);if("function"==typeof e)return e.apply(this,arguments)}}var q=function(){var c=function(){this._eventsBucket=
[];this._beforeRemoving=this._beforeAdding=null};c.prototype.addEvent=function(b,a,e){b={target:b,selector:a,callback:e,firedElems:[]};this._beforeAdding&&this._beforeAdding(b);this._eventsBucket.push(b);return b};c.prototype.removeEvent=function(b){for(var a=this._eventsBucket.length-1,e;e=this._eventsBucket[a];a--)b(e)&&(this._beforeRemoving&&this._beforeRemoving(e),this._eventsBucket.splice(a,1))};c.prototype.beforeAdding=function(b){this._beforeAdding=b};c.prototype.beforeRemoving=function(b){this._beforeRemoving=
b};return c}(),h=function(c,b){var a=new q;a.beforeAdding(function(e){var a=e.target,d;if(a===n.document||a===n)a=document.body.parentNode;d=new MutationObserver(function(a){b.call(this,a,e)});d.observe(a,c);e.observer=d});a.beforeRemoving(function(a){a.observer.disconnect()});this.bindEvent=function(b,c){for(var d=0;d<this.length;d++)a.addEvent(this[d],b,c)};this.unbindEvent=function(){var b=this[0];a.removeEvent(function(a){return a.target===b})};this.unbindEventWithSelectorOrCallback=function(b){var c=
this[0];a.removeEvent("function"===typeof b?function(a){return a.target===c&&a.callback===b}:function(a){return a.target===c&&a.selector===b})};this.unbindEventWithSelectorAndCallback=function(b,c){var d=this[0];a.removeEvent(function(a){return a.target===d&&a.selector===b&&a.callback===c})};return this};l=new h({attributes:!0,childList:!0,subtree:!0},function(c,b){c.forEach(function(a){var c=a.addedNodes,g=f(a.target),d=[];null!==c&&0<c.length?m(c,b,d):"attributes"===a.type&&g.is(b.selector)&&-1==
b.firedElems.indexOf(g[0])&&(b.firedElems.push(g[0]),d.push({callback:b.callback,elem:g[0]}));p(d)})});h=new h({childList:!0,subtree:!0},function(c,b){c.forEach(function(a){var c=a.removedNodes;f(a.target);a=[];null!==c&&0<c.length&&m(c,b,a);p(a)})});f.fn.arrive=l.bindEvent;k(f.fn,"unbindArrive",l.unbindEvent);k(f.fn,"unbindArrive",l.unbindEventWithSelectorOrCallback);k(f.fn,"unbindArrive",l.unbindEventWithSelectorAndCallback);f.fn.leave=h.bindEvent;k(f.fn,"unbindLeave",h.unbindEvent);k(f.fn,"unbindLeave",
h.unbindEventWithSelectorOrCallback);k(f.fn,"unbindLeave",h.unbindEventWithSelectorAndCallback)})(this,jQuery);