/*
 * arrive.js
 * v1.1
 * https://github.com/uzairfarooq/arrive
 * MIT licensed
 *
 * Copyright (c) 2014 Uzair Farooq
 */

(function(q,r,l){function m(a,c,b){for(var e=0,d;d=a[e];e++)f.matchesSelector(d,c.selector)&&-1==c.firedElems.indexOf(d)&&(c.firedElems.push(d),b.push({callback:c.callback,elem:d})),0<d.childNodes.length&&m(d.childNodes,c,b)}function s(a){for(var c=0,b;b=a[c];c++)b.callback.call(b.elem)}function g(a){a.arrive=h.bindEvent;f.addMethod(a,"unbindArrive",h.unbindEvent);f.addMethod(a,"unbindArrive",h.unbindEventWithSelectorOrCallback);f.addMethod(a,"unbindArrive",h.unbindEventWithSelectorAndCallback);a.leave=
k.bindEvent;f.addMethod(a,"unbindLeave",k.unbindEvent);f.addMethod(a,"unbindLeave",k.unbindEventWithSelectorOrCallback);f.addMethod(a,"unbindLeave",k.unbindEventWithSelectorAndCallback)}var f=function(){var a=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(c,b){return c instanceof HTMLElement&&a.call(c,b)},addMethod:function(c,b,a){var d=c[b];c[b]=function(){if(a.length==
arguments.length)return a.apply(this,arguments);if("function"==typeof d)return d.apply(this,arguments)}}}}(),t=function(){var a=function(){this._eventsBucket=[];this._beforeRemoving=this._beforeAdding=null};a.prototype.addEvent=function(c,b,a){c={target:c,selector:b,callback:a,firedElems:[]};this._beforeAdding&&this._beforeAdding(c);this._eventsBucket.push(c);return c};a.prototype.removeEvent=function(c){for(var b=this._eventsBucket.length-1,a;a=this._eventsBucket[b];b--)c(a)&&(this._beforeRemoving&&
this._beforeRemoving(a),this._eventsBucket.splice(b,1))};a.prototype.beforeAdding=function(c){this._beforeAdding=c};a.prototype.beforeRemoving=function(c){this._beforeRemoving=c};return a}();l=function(a,c){function b(d){if(d instanceof HTMLElement||d instanceof HTMLDocument||d instanceof Window)d=[d];return d}var e=new t;e.beforeAdding(function(d){var b=d.target,n;if(b===q.document||b===q)b=document.body.parentNode;n=new MutationObserver(function(b){c.call(this,b,d)});n.observe(b,a);d.observer=n});
e.beforeRemoving(function(b){b.observer.disconnect()});this.bindEvent=function(d,c){for(var a=b(this),p=0;p<a.length;p++)e.addEvent(a[p],d,c)};this.unbindEvent=function(){var a=b(this);e.removeEvent(function(b){for(var c=0;c<a.length;c++)if(b.target===a[c])return!0;return!1})};this.unbindEventWithSelectorOrCallback=function(c){var a=b(this);e.removeEvent("function"===typeof c?function(b){for(var e=0;e<a.length;e++)if(b.target===a[e]&&b.callback===c)return!0;return!1}:function(b){for(var e=0;e<a.length;e++)if(b.target===
a[e]&&b.selector===c)return!0;return!1})};this.unbindEventWithSelectorAndCallback=function(a,c){var f=b(this);e.removeEvent(function(b){for(var e=0;e<f.length;e++)if(b.target===f[e]&&b.selector===a&&b.callback===c)return!0;return!1})};return this};var h=new l({attributes:!0,childList:!0,subtree:!0},function(a,c){a.forEach(function(b){var a=b.addedNodes,d=b.target,g=[];null!==a&&0<a.length?m(a,c,g):"attributes"===b.type&&f.matchesSelector(d,c.selector)&&-1==c.firedElems.indexOf(d)&&(c.firedElems.push(d),
g.push({callback:c.callback,elem:d}));s(g)})}),k=new l({childList:!0,subtree:!0},function(a,c){a.forEach(function(b){b=b.removedNodes;var a=[];null!==b&&0<b.length&&m(b,c,a);s(a)})});r&&g(r.fn);g(HTMLElement.prototype);g(HTMLDocument.prototype);g(Window.prototype)})(this,jQuery);